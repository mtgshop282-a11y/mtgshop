{% extends "layout.html" %}

{% block title %}Accueil - Gestion des Appartements{% endblock %}

{% block content %}
<div class="container">
    <!-- Bannière en haut de la page -->
    <div class="jumbotron mt-5 shadow rounded">
        <h1 class="display-4">Bienvenue dans votre espace de gestion</h1>
        <p class="lead">Gérez les opérations de votre entreprise en toute simplicité.</p>
        <hr class="my-4">
        <p>Utilisez les sections ci-dessous pour accéder aux différentes fonctionnalités de gestion.</p>
    </div>

    <!-- Grille pour les sections -->
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 mt-4">
        <!-- Section pour les administrateurs -->
        {% if current_user.has_permission('gestion_utilisateurs') %}
        <div class="col">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h2 class="h5"><i class="fas fa-users-cog me-2"></i> Gestion des Utilisateurs</h2>
                </div>
                <div class="card-body">
                    <p class="card-text">Vous avez accès à la gestion des utilisateurs. Vous pouvez ajouter, modifier ou supprimer des utilisateurs.</p>
                    <a href="/gestion_utilisateurs" class="btn btn-primary">
                        <i class="fas fa-users me-2"></i> Gérer les Utilisateurs
                    </a>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Section pour la gestion des produits -->
        {% if current_user.has_permission('gestion_produits') %}
        <div class="col">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-success text-white">
                    <h2 class="h5"><i class="fas fa-boxes me-2"></i> Gestion des Produits</h2>
                </div>
                <div class="card-body">
                    <p class="card-text">Vous avez accès à la gestion des produits. Vous pouvez ajouter, modifier ou supprimer des produits.</p>
                    <a href="/gestion_produits" class="btn btn-success">
                        <i class="fas fa-edit me-2"></i> Gérer les Produits
                    </a>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Section pour la gestion des ventes -->
        {% if current_user.has_permission('gestion_ventes') %}
        <div class="col">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-info text-white">
                    <h2 class="h5"><i class="fas fa-shopping-cart me-2"></i> Gestion des Ventes</h2>
                </div>
                <div class="card-body">
                    <p class="card-text">Vous avez accès à la gestion des ventes. Vous pouvez créer de nouvelles ventes et consulter l'historique.</p>
                    <a href="/ventes" class="btn btn-info">
                        <i class="fas fa-cart-plus me-2"></i> Gérer les Ventes
                    </a>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Section pour la gestion des dépenses -->
        {% if current_user.has_permission('gestion_depenses_ordinaires') or current_user.has_permission('gestion_depenses_recurrentes') %}
        <div class="col">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-warning text-dark">
                    <h2 class="h5"><i class="fas fa-money-bill-wave me-2"></i> Gestion des Dépenses</h2>
                </div>
                <div class="card-body">
                    <p class="card-text">Vous avez accès à la gestion des dépenses. Vous pouvez ajouter, modifier ou supprimer des dépenses.</p>
                    <div class="d-grid gap-2">
                        {% if current_user.has_permission('gestion_depenses_ordinaires') %}
                        <a href="/depenses_ordinaires" class="btn btn-warning">
                            <i class="fas fa-list me-2"></i> Dépenses Ordinaires
                        </a>
                        {% endif %}
                        {% if current_user.has_permission('gestion_depenses_recurrentes') %}
                        <a href="/depenses_recurrentes" class="btn btn-warning">
                            <i class="fas fa-list me-2"></i> Dépenses Récurrentes
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Section pour la gestion du dépôt -->
        {% if current_user.has_permission('gestion_depot') %}
        <div class="col">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-secondary text-white">
                    <h2 class="h5"><i class="fas fa-warehouse me-2"></i> Gestion du Dépôt</h2>
                </div>
                <div class="card-body">
                    <p class="card-text">Vous avez accès à la gestion du dépôt. Vous pouvez gérer les transactions et consulter le stock.</p>
                    <div class="d-grid gap-2">
                        <a href="/gestion_transactions_depot" class="btn btn-secondary">
                            <i class="fas fa-exchange-alt me-2"></i> Transactions
                        </a>
                        <a href="/stock_depot" class="btn btn-secondary">
                            <i class="fas fa-boxes me-2"></i> Stock au Dépôt
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Section pour la gestion de la caisse -->
        {% if current_user.has_permission('gestion_caise') %}
        <div class="col">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-danger text-white">
                    <h2 class="h5"><i class="fas fa-cash-register me-2"></i> Gestion de la Caisse</h2>
                </div>
                <div class="card-body">
                    <p class="card-text">Vous avez accès à la gestion de la caisse. Vous pouvez enregistrer des entrées et sorties d'argent.</p>
                    <a href="/gestion_caisse" class="btn btn-danger">
                        <i class="fas fa-money-bill me-2"></i> Gérer la Caisse
                    </a>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Section pour la gestion du compte bancaire -->
        {% if current_user.has_permission('gestion_banque') %}
        <div class="col">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-dark text-white">
                    <h2 class="h5"><i class="fas fa-piggy-bank me-2"></i> Gestion du Compte Bancaire</h2>
                </div>
                <div class="card-body">
                    <p class="card-text">Vous avez accès à la gestion du compte bancaire. Vous pouvez enregistrer des dépôts et retraits.</p>
                    <a href="/gestion_compte_bancaire" class="btn btn-dark">
                        <i class="fas fa-university me-2"></i> Gérer le Compte
                    </a>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Section pour les rapports -->
        {% if current_user.has_permission('voir_benefice') or current_user.has_permission('voir_historique_vente') %}
        <div class="col">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h2 class="h5"><i class="fas fa-chart-line me-2"></i> Rapports</h2>
                </div>
                <div class="card-body">
                    <p class="card-text">Vous avez accès aux rapports de l'entreprise.</p>
                    <div class="d-grid gap-2">
                        {% if current_user.has_permission('voir_benefice') %}
                        <a href="/benefices" class="btn btn-primary">
                            <i class="fas fa-chart-line me-2"></i> Bénéfices
                        </a>
                        {% endif %}
                        {% if current_user.has_permission('voir_historique_vente') %}
                        <a href="/historique_ventes" class="btn btn-primary">
                            <i class="fas fa-history me-2"></i> Historique des Ventes
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}